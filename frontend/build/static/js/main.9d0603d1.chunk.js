(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{118:function(e,t,a){e.exports=a(270)},123:function(e,t,a){},125:function(e,t,a){},148:function(e,t){},270:function(e,t,a){"use strict";a.r(t);var n=a(2),c=a.n(n),l=a(109),o=a.n(l),s=a(115),r=a(110),i=a(111),u=a(116),h=a(112),d=a(117),g=a(28),m=(a(123),a(125),function(e){return c.a.createElement("table",null,c.a.createElement("tbody",null,c.a.createElement("tr",null,c.a.createElement("th",null," Success (200 response) "),c.a.createElement("th",null," Failure (500 Response) "),c.a.createElement("th",null," Other ")),c.a.createElement("tr",null,c.a.createElement("td",null," ",e.data.Success," "),c.a.createElement("td",null," ",e.data.Failure," "),c.a.createElement("td",null," ",e.data.Other," "))))}),v=a(113),k=a.n(v),f=a(114),p=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(u.a)(this,Object(h.a)(t).call(this,e))).state={active:!1,data:[],category:{Success:0,Failure:0,Other:0},showLogs:!1},a.handleClick=a.handleClick.bind(Object(g.a)(Object(g.a)(a))),a.toggleLogs=a.toggleLogs.bind(Object(g.a)(Object(g.a)(a))),a.intervalId=null,a.endpoint="/api/health-check",a.failureCodes=[500],a.socket=k()("http://localhost:5000"),a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.socket.on("dataPoint",function(t){return e.setState({data:e.state.data.concat(t),category:e.helper(t.status)})})}},{key:"reset",value:function(){}},{key:"helper",value:function(e){var t,a;return t=200==e?"Success":500==e?"Failure":"Other",(a=Object(s.a)({},this.state.category))[t]+=1,a}},{key:"componentWillUnmount",value:function(){this.socket.close(),this.setState({active:!1}),this.togglePolling()}},{key:"handleClick",value:function(e){console.log("clicked"),e.preventDefault(),this.togglePolling(),this.setState({active:!this.state.active})}},{key:"togglePolling",value:function(){fetch("http://localhost:5000".concat(this.endpoint,"/?active=").concat(this.state.active))}},{key:"toggleLogs",value:function(){return c.a.createElement("ul",null,this.state.data.slice(-10).map(function(e,t){return c.a.createElement("li",{key:t},c.a.createElement("span",null," ",e.timestamp),c.a.createElement("span",null," ",e.status," "))}))}},{key:"calculatePercentage",value:function(e){return Math.round(this.state.category[e]/this.state.data.length*100)}},{key:"renderGraph",value:function(){return c.a.createElement(f.PieChart,{labels:!0,data:[{key:"Success ".concat(this.calculatePercentage("Success"),"%"),value:"".concat(this.state.category.Success),color:"#E38627"},{key:"Failure ".concat(this.calculatePercentage("Failure"),"%"),value:"".concat(this.state.category.Failure),color:"#C13C37"},{key:"Other ".concat(this.calculatePercentage("Other"),"%"),value:"".concat(this.state.category.Other),color:"#6A2135"}]})}},{key:"render",value:function(){var e=this,t=this.state,a=t.active,n=(t.data,t.category);return console.log(this.state),c.a.createElement("div",{className:"container"},c.a.createElement("div",{className:"side-container"},c.a.createElement("button",{onClick:this.handleClick}," ",0==a?"Start":"Pause"," Health Check"," "),c.a.createElement("button",{onClick:function(){return e.setState({showLogs:!e.state.showLogs})}}," ","Show Rolling Logs"," ")),this.state.showLogs?this.toggleLogs():null,c.a.createElement(m,{data:n}),this.state.data.length>0?this.renderGraph():null)}}]),t}(n.Component);document.addEventListener("DOMContentLoaded",function(){var e=document.querySelector("#root");o.a.render(c.a.createElement(p,null),e)})}},[[118,2,1]]]);
//# sourceMappingURL=main.9d0603d1.chunk.js.map